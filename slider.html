<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Camera Slider</title>

<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
}
button {
  width:90%;
  padding:15px;
  margin:8px;
  font-size:18px;
}
</style>
</head>

<body>
<h2>Camera Slider</h2>

<button onclick="connectBLE()">CONNECT</button>
<button onclick="send('TEST')">TEST</button>
<button onclick="send('RUN')">RUN</button>
<button onclick="send('STOP')">STOP</button>

<script>
let device = null;
let server = null;
let characteristic = null;
let bleConnected = false;

async function connectBLE() {
  try {
    device = await navigator.bluetooth.requestDevice({
      filters: [{ name: 'CameraSlider' }],
      optionalServices: ['12345678-1234-1234-1234-1234567890ab']
    });

    device.addEventListener(
      'gattserverdisconnected',
      onDisconnected
    );

    server = await device.gatt.connect();

    const service = await server.getPrimaryService(
      '12345678-1234-1234-1234-1234567890ab'
    );

    characteristic = await service.getCharacteristic(
      'abcd1234-1234-1234-1234-abcdef123456'
    );

    bleConnected = true;
    alert("BLE Connected");

  } catch (err) {
    alert("BLE Error: " + err);
  }
}

function onDisconnected() {
  bleConnected = false;
  alert("BLE Disconnected");
}

function send(cmd) {
  if (!bleConnected || !characteristic) {
    alert("Not connected");
    return;
  }

  const data = new TextEncoder().encode(cmd + "\n");
  characteristic.writeValue(data);
}
</script>
</body>
</html>


