<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Camera Slider</title>
</head>

<body style="background:#111;color:white;text-align:center;font-family:Arial">

<h2>Camera Slider</h2>

<button onclick="connectBLE()">CONNECT</button><br><br>
<button onclick="sendCmd('TEST')">TEST</button><br><br>
<button onclick="sendCmd('RUN')">RUN</button>

<script>
let device;
let characteristic;
let connected = false;

async function connectBLE() {
  try {
    device = await navigator.bluetooth.requestDevice({
      filters: [{ name: 'CameraSlider' }],
      optionalServices: ['12345678-1234-1234-1234-1234567890ab']
    });

    const server = await device.gatt.connect();
    const service = await server.getPrimaryService(
      '12345678-1234-1234-1234-1234567890ab'
    );

    characteristic = await service.getCharacteristic(
      'abcd1234-1234-1234-1234-abcdef123456'
    );

    connected = true;
    alert("BLE Connected");

  } catch (e) {
    alert("BLE Error");
  }
}

function sendCmd(cmd) {
  if (!connected) {
    alert("Not connected");
    return;
  }
  const data = new TextEncoder().encode(cmd + "\n");
  characteristic.writeValue(data);
}
</script>

</body>
</html>

