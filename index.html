<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Camera Slider</title>

<style>
body { background:#111; color:white; font-family:Arial; text-align:center; }
button { padding:12px 18px; margin:6px; font-size:15px; }
input { width:90px; text-align:right; }
fieldset { border:1px solid #444; margin:10px; }
legend { color:#aaa; }
</style>
</head>

<body>

<h2>Camera Slider</h2>

<fieldset>
<legend>Jog Step</legend>
<input id="JOGSTEP" type="number" value="200">
<button onclick="send(`JOGSTEP:${JOGSTEP.value}`)">SET</button>
</fieldset>

<fieldset>
<legend>Manual Jog</legend>
<button onmousedown="jog('M1',-1)" onmouseup="stop()">M1 ◀</button>
<button onmousedown="jog('M1',1)" onmouseup="stop()">M1 ▶</button><br>

<button onmousedown="jog('M2',-1)" onmouseup="stop()">M2 ◀</button>
<button onmousedown="jog('M2',1)" onmouseup="stop()">M2 ▶</button><br>

<button onmousedown="jog('BOTH',-1)" onmouseup="stop()">BOTH ◀</button>
<button onmousedown="jog('BOTH',1)" onmouseup="stop()">BOTH ▶</button>
</fieldset>

<button onclick="send('HOME')">HOME</button>
<button onclick="send('RUN')">RUN</button>
<button onclick="connect()">CONNECT</button>

<script>
let char, connected=false;
const S="12345678-1234-1234-1234-1234567890ab";
const C="abcd1234-1234-1234-1234-abcdef123456";

async function connect(){
  const d=await navigator.bluetooth.requestDevice({
    filters:[{name:'CameraSlider'}], optionalServices:[S]
  });
  const s=await (await d.gatt.connect()).getPrimaryService(S);
  char=await s.getCharacteristic(C);
  connected=true;
  alert("Connected");
}

function send(cmd){
  if(!connected) return;
  char.writeValue(new TextEncoder().encode(cmd+"\n"));
}

function jog(axis,dir){
  send(`JOG:${axis}:${dir}`);
}
function stop(){
  send("STOP");
}
</script>

</body>
</html>

