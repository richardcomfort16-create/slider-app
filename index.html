<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Slider Control</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            padding: 20px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .connection-section {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .status {
            font-weight: bold;
            font-size: 16px;
            margin: 10px 0;
            padding: 8px 15px;
            border-radius: 5px;
            display: inline-block;
        }
        
        .status.connected {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.disconnected {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.error {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }
        
        .control-group {
            margin: 25px 0;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        
        .control-group h3 {
            margin-top: 0;
            color: #495057;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        
        .input-row {
            display: flex;
            align-items: center;
            margin: 15px 0;
            gap: 10px;
        }
        
        label {
            min-width: 120px;
            font-weight: bold;
            color: #333;
        }
        
        input[type="number"], input[type="text"] {
            padding: 8px 12px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            width: 100px;
        }
        
        input[type="range"] {
            flex: 1;
            margin: 0 15px;
            height: 8px;
            border-radius: 4px;
            background: #ddd;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #007bff;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #1e7e34;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover {
            background-color: #e0a800;
            transform: translateY(-2px);
        }
.button-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .jog-grid {
            display: grid;
            grid-template-columns: 1fr 1fr auto 1fr 1fr;
            gap: 10px;
            align-items: center;
            margin: 20px 0;
        }
        
        .stop-btn {
            grid-column: 3;
            font-size: 18px;
            padding: 15px 20px;
            background-color: #dc3545;
            border: 3px solid #721c24;
        }
        
        .quick-positions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        
        .preset-btn {
            background-color: #6c757d;
            color: white;
            font-size: 12px;
            padding: 8px 12px;
        }
        
        .preset-btn:hover {
            background-color: #5a6268;
        }
        
        .slider-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            padding: 10px;
            background-color: white;
            border-radius: 6px;
            border: 1px solid #ccc;
        }
        
        .slider-label {
            min-width: 80px;
            font-weight: bold;
            color: #333;
            text-align: left;
        }
        
        .slider-input {
            width: 60px;
            text-align: center;
            border: 1px solid #007bff;
        }
        
        .center-btn {
            background-color: #17a2b8;
            color: white;
            padding: 6px 12px;
            font-size: 12px;
            min-width: 60px;
        }
        
        .center-btn:hover {
            background-color: #138496;
        }
        
        .connection-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .ip-input {
            padding: 8px 12px;
            border: 2px solid #007bff;
            border-radius: 5px;
            font-size: 14px;
            width: 150px;
            text-align: center;
        }
        
        .quick-ip-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            margin: 10px 0;
        }
        
        .quick-ip-btn {
            background-color: #e9ecef;
            color: #495057;
            border: 1px solid #ced4da;
            font-size: 11px;
            padding: 5px 8px;
        }
        
        .quick-ip-btn:hover {
            background-color: #dee2e6;
        }
        
        .parameter-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .param-box {
            padding: 15px;
            background-color: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
        }
        
        .param-title {
            font-weight: bold;
            color: #495057;
            margin-bottom: 15px;
            text-align: center;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .param-input {
            width: 70px;
            margin: 0 5px;
            text-align: center;
            font-size: 12px;
        }
        
        .param-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 8px 0;
            font-size: 13px;
        }
        
        .status-indicators {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 15px 0;
            flex-wrap: wrap;
        }
        
        .indicator {
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .indicator.active {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .indicator.inactive {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        @media (max-width: 600px) {
            .container {
                margin: 10px;
                padding: 15px;
            }
            
            .parameter-section {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .jog-grid {
                grid-template-columns: 1fr 1fr;
                grid-template-rows: auto auto auto;
            }
            
            .stop-btn {
                grid-column: 1 / -1;
                grid-row: 2;
            }
            
            .button-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            input[type="number"], input[type="text"] {
                width: 80px;
            }
        }
    </style>
</head>
<body>
<div class="container">
        <h1>üé• Camera Slider Control</h1>
        
        <!-- Connection Section -->
        <div class="connection-section">
            <h3>üì° BLE Connection</h3>
            <div class="status-indicators">
                <div id="status" class="status disconnected">üî¥ Disconnected</div>
                <div id="bleStatus" class="indicator inactive">BLE: Not Connected</div>
            </div>
            
            <div class="connection-inputs">
                <label for="deviceName">Device:</label>
                <input type="text" id="deviceName" class="ip-input" value="CameraSlider" placeholder="Device Name">
                <button class="btn-success" onclick="connectBLE()">üîó Connect BLE</button>
                <button class="btn-danger" onclick="disconnectBLE()">üîå Disconnect</button>
            </div>
            
            <div class="quick-ip-grid">
                <button class="quick-ip-btn" onclick="setDeviceName('CameraSlider')">Default Device</button>
                <button class="quick-ip-btn" onclick="setDeviceName('ESP32Slider')">ESP32 Slider</button>
            </div>
        </div>

        <!-- Motor 1 Controls -->
        <div class="control-group">
            <h3>üéØ Motor 1 (M1) Controls</h3>
            
            <div class="slider-container">
                <label class="slider-label">Position:</label>
                <input type="number" id="m1PosInput" class="slider-input" value="1000" min="0" max="4000" 
                       onchange="updateM1FromInput()" onkeypress="handleEnterKey(event, updateM1FromInput)">
                <input type="range" id="m1PosSlider" min="0" max="4000" value="1000" 
                       oninput="updateM1Display()" onchange="sendM1Position()">
                <button class="center-btn" onclick="centerM1Slider()">Center</button>
            </div>
            
            <div class="slider-container">
                <label class="slider-label">Speed:</label>
                <input type="number" id="m1SpeedInput" class="slider-input" value="2000" min="100" max="5000" 
                       onchange="updateM1SpeedFromInput()" onkeypress="handleEnterKey(event, updateM1SpeedFromInput)">
                <input type="range" id="m1SpeedSlider" min="100" max="5000" value="2000" 
                       oninput="updateM1SpeedDisplay()" onchange="sendM1Speed()">
                <button class="center-btn" onclick="centerM1SpeedSlider()">Default</button>
            </div>
            
            <div class="parameter-section">
                <div class="param-box">
                    <div class="param-title">M1 Range Settings</div>
                    <div class="param-row">
                        <span>Start:</span>
                        <input type="number" id="m1Start" class="param-input" value="0" onchange="sendM1Start()">
                    </div>
                    <div class="param-row">
                        <span>End:</span>
                        <input type="number" id="m1End" class="param-input" value="4000" onchange="sendM1End()">
                    </div>
                </div>
                
                <div class="param-box">
                    <div class="param-title">Quick M1 Positions</div>
                    <div class="quick-positions">
                        <button class="preset-btn" onclick="setM1Position(0)">Start</button>
                        <button class="preset-btn" onclick="setM1Position(1000)">25%</button>
                        <button class="preset-btn" onclick="setM1Position(2000)">50%</button>
                        <button class="preset-btn" onclick="setM1Position(4000)">End</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Motor 2 Controls -->
        <div class="control-group">
            <h3>üéØ Motor 2 (M2) Controls</h3>
            
            <div class="slider-container">
                <label class="slider-label">Position:</label>
                <input type="number" id="m2PosInput" class="slider-input" value="1000" min="0" max="4000" 
                       onchange="updateM2FromInput()" onkeypress="handleEnterKey(event, updateM2FromInput)">
                <input type="range" id="m2PosSlider" min="0" max="4000" value="1000" 
                       oninput="updateM2Display()" onchange="sendM2Position()">
                <button class="center-btn" onclick="centerM2Slider()">Center</button>
            </div>
            
            <div class="slider-container">
                <label class="slider-label">Speed:</label>
                <input type="number" id="m2SpeedInput" class="slider-input" value="2000" min="100" max="5000" 
                       onchange="updateM2SpeedFromInput()" onkeypress="handleEnterKey(event, updateM2SpeedFromInput)">
                <input type="range" id="m2SpeedSlider" min="100" max="5000" value="2000" 
                       oninput="updateM2SpeedDisplay()" onchange="sendM2Speed()">
                <button class="center-btn" onclick="centerM2SpeedSlider()">Default</button>
            </div>
            
            <div class="parameter-section">
                <div class="param-box">
                    <div class="param-title">M2 Range Settings</div>
                    <div class="param-row">
                        <span>Start:</span>
                        <input type="number" id="m2Start" class="param-input" value="0" onchange="sendM2Start()">
                    </div>
                    <div class="param-row">
                        <span>End:</span>
                        <input type="number" id="m2End" class="param-input" value="4000" onchange="sendM2End()">
                    </div>
                </div>
                
                <div class="param-box">
                    <div class="param-title">Quick M2 Positions</div>
                    <div class="quick-positions">
                        <button class="preset-btn" onclick="setM2Position(0)">Start</button>
                        <button class="preset-btn" onclick="setM2Position(1000)">25%</button>
                        <button class="preset-btn" onclick="setM2Position(2000)">50%</button>
                        <button class="preset-btn" onclick="setM2Position(4000)">End</button>
                    </div>
                </div>
            </div>
        </div>
<!-- Jog Controls -->
        <div class="control-group">
            <h3>üïπÔ∏è Manual Jog Controls</h3>
            
            <div class="jog-grid">
                <button class="btn-primary" onmousedown="startContinuousJog('M1', 'left')" 
                        onmouseup="stopJog()" ontouchstart="startContinuousJog('M1', 'left')" 
                        ontouchend="stopJog()">‚óÄ‚óÄ M1 Left</button>
                        
                <button class="btn-primary" onmousedown="startContinuousJog('M1', 'right')" 
                        onmouseup="stopJog()" ontouchstart="startContinuousJog('M1', 'right')" 
                        ontouchend="stopJog()">M1 Right ‚ñ∂‚ñ∂</button>
                        
                <button class="stop-btn btn-danger" onclick="emergencyStop()">üõë STOP</button>
                
                <button class="btn-primary" onmousedown="startContinuousJog('M2', 'left')" 
                        onmouseup="stopJog()" ontouchstart="startContinuousJog('M2', 'left')" 
                        ontouchend="stopJog()">‚óÄ‚óÄ M2 Left</button>
                        
                <button class="btn-primary" onmousedown="startContinuousJog('M2', 'right')" 
                        onmouseup="stopJog()" ontouchstart="startContinuousJog('M2', 'right')" 
                        ontouchend="stopJog()">M2 Right ‚ñ∂‚ñ∂</button>
            </div>
            
            <div class="parameter-section">
                <div class="param-box">
                    <div class="param-title">M1 Jog Speeds</div>
                    <div class="param-row">
                        <span>Slow:</span>
                        <input type="number" id="m1JogSlow" class="param-input" value="20" min="5" max="100">
                    </div>
                    <div class="param-row">
                        <span>Fast:</span>
                        <input type="number" id="m1JogFast" class="param-input" value="80" min="20" max="100">
                    </div>
                </div>
                
                <div class="param-box">
                    <div class="param-title">M2 Jog Speeds</div>
                    <div class="param-row">
                        <span>Slow:</span>
                        <input type="number" id="m2JogSlow" class="param-input" value="20" min="5" max="100">
                    </div>
                    <div class="param-row">
                        <span>Fast:</span>
                        <input type="number" id="m2JogFast" class="param-input" value="80" min="20" max="100">
                    </div>
                </div>
            </div>
        </div>
<!-- Sequence Controls -->
        <div class="control-group">
            <h3>üé¨ Sequence Controls</h3>
            
            <div class="button-grid">
                <button class="btn-success" onclick="startSequence()">‚ñ∂Ô∏è START</button>
                <button class="btn-warning" onclick="pauseSequence()">‚è∏Ô∏è PAUSE</button>
                <button class="btn-danger" onclick="stopSequence()">‚èπÔ∏è STOP</button>
                <button class="btn-primary" onclick="homeMotors()">üè† HOME</button>
                <button class="btn-primary" onclick="testRun()">üß™ TEST</button>
                <button class="btn-primary" onclick="savePreset()">üíæ SAVE</button>
            </div>
            
            <div class="parameter-section">
                <div class="param-box">
                    <div class="param-title">Sequence Settings</div>
                    <div class="param-row">
                        <span>Cycles:</span>
                        <input type="number" id="cycles" class="param-input" value="1" min="0" max="99" 
                               onchange="sendCycles()">
                        <small>(0=‚àû)</small>
                    </div>
                    <div class="param-row">
                        <span>Return:</span>
                        <label class="switch">
                            <input type="checkbox" id="returnEnabled" checked onchange="sendReturn()">
                            <span class="slider-switch"></span>
                        </label>
                    </div>
                </div>
                
                <div class="param-box">
                    <div class="param-title">Status Display</div>
                    <div class="param-row">
                        <span>M1 Pos:</span>
                        <span id="m1CurrentPos">0</span>
                    </div>
                    <div class="param-row">
                        <span>M2 Pos:</span>
                        <span id="m2CurrentPos">0</span>
                    </div>
                    <div class="param-row">
                        <span>Cycle:</span>
                        <span id="currentCycle">0</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Combined Controls -->
        <div class="control-group">
            <h3>‚ö° Combined Motor Controls</h3>
            
            <div class="slider-container">
                <label class="slider-label">Both Pos:</label>
                <input type="number" id="bothPosInput" class="slider-input" value="1000" min="0" max="4000" 
                       onchange="updateBothFromInput()" onkeypress="handleEnterKey(event, updateBothFromInput)">
                <input type="range" id="bothPosSlider" min="0" max="4000" value="1000" 
                       oninput="updateBothDisplay()" onchange="sendBothPosition()">
                <button class="center-btn" onclick="centerBothSlider()">Center</button>
            </div>
            
            <div class="button-grid">
                <button class="btn-primary" onmousedown="startContinuousJog('BOTH', 'left')" 
                        onmouseup="stopJog()">‚óÄ‚óÄ Both Left</button>
                <button class="btn-primary" onmousedown="startContinuousJog('BOTH', 'right')" 
                        onmouseup="stopJog()">Both Right ‚ñ∂‚ñ∂</button>
                <button class="btn-warning" onclick="syncMotors()">üîÑ SYNC</button>
            </div>
        </div>
        
        <!-- Toggle Switch CSS -->
        <style>
            .switch {
                position: relative;
                display: inline-block;
                width: 40px;
                height: 20px;
            }
            
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }
            
            .slider-switch {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                transition: .4s;
                border-radius: 20px;
            }
            
            .slider-switch:before {
                position: absolute;
                content: "";
                height: 16px;
                width: 16px;
                left: 2px;
                bottom: 2px;
                background-color: white;
                transition: .4s;
                border-radius: 50%;
            }
            
            input:checked + .slider-switch {
                background-color: #2196F3;
            }
            
            input:checked + .slider-switch:before {
                transform: translateX(20px);
            }
        </style>
    </div>
</body>
</html>












