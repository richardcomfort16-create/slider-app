<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Camera Slider</title>

<style>
body {
  background:#111;
  color:white;
  font-family:Arial;
  text-align:center;
  user-select:none;
}
input { width:90px; }
button {
  padding:14px 20px;
  margin:6px;
  font-size:16px;
}
fieldset {
  border:1px solid #444;
  margin:10px;
}
</style>
</head>

<body>

<h2>Camera Slider</h2>

<fieldset>
<legend>Positions (Steps)</legend>
M1 START <input id="m1s" type="number" value="0"><br>
M1 END <input id="m1e" type="number" value="2000"><br>
M2 START <input id="m2s" type="number" value="0"><br>
M2 END <input id="m2e" type="number" value="2000"><br>
<button onclick="sendPositions()">SEND POSITIONS</button>
</fieldset>

<fieldset>
<legend>Jog Speed</legend>
<input type="range" min="100" max="3000" value="800"
oninput="setJogSpeed(this.value)">
<p id="spd">800</p>
</fieldset>

<button onclick="jog('M1',-1)">M1 ◀</button>
<button onclick="jog('M1',1)">M1 ▶</button><br>

<button onclick="jog('M2',-1)">M2 ◀</button>
<button onclick="jog('M2',1)">M2 ▶</button><br>

<button onclick="jog('BOTH',-1)">BOTH ◀</button>
<button onclick="jog('BOTH',1)">BOTH ▶</button><br><br>

<button onclick="send('STOP')" style="background:#900;">STOP</button><br><br>

<button onclick="send('HOME')">HOME</button>
<button onclick="send('RUN')">RUN</button>
<button onclick="connect()">CONNECT</button>

<script>
let char, connected=false;
const S="12345678-1234-1234-1234-1234567890ab";
const C="abcd1234-1234-1234-1234-abcdef123456";

async function connect(){
  const d = await navigator.bluetooth.requestDevice({
    filters:[{name:'CameraSlider'}],
    optionalServices:[S]
  });
  const s = await (await d.gatt.connect()).getPrimaryService(S);
  char = await s.getCharacteristic(C);
  connected=true;
  alert("Connected");
}

function send(cmd){
  if(!connected) return;
  char.writeValue(new TextEncoder().encode(cmd+"\n"));
}

function jog(axis,dir){
  send(`JOG:${axis}:${dir}`);
}

function setJogSpeed(v){
  document.getElementById("spd").innerText=v;
  send(`JOGSPD:${v}`);
}

function sendPositions(){
  send(`M1S:${m1s.value}`);
  send(`M1E:${m1e.value}`);
  send(`M2S:${m2s.value}`);
  send(`M2E:${m2e.value}`);
}
</script>

</body>
</html>

