<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{background:#111;color:#fff;font-family:Arial;text-align:center}
input[type=range]{width:90%}
select,button{font-size:16px;margin:5px;padding:8px}
</style>

<body>

<h3>Camera Slider</h3>

<select id="axis">
<option value="BOTH">BOTH</option>
<option value="M1">M1</option>
<option value="M2">M2</option>
</select><br>

<input type="range" min="-100" max="100" value="0"
oninput="jog(this.value)" onchange="stop()">
<p id="v">0</p>

<button onclick="send('RUN')">RUN</button>
<button onclick="send('STOP')">STOP</button>
<button onclick="send('HOME')">HOME</button>
<button onclick="connect()">CONNECT</button>

<script>
let c,ok=false;
const S="12345678-1234-1234-1234-1234567890ab";
const C="abcd1234-1234-1234-1234-abcdef123456";

async function connect(){
 const d=await navigator.bluetooth.requestDevice({
  filters:[{name:'CameraSlider'}],optionalServices:[S]});
 const s=await (await d.gatt.connect()).getPrimaryService(S);
 c=await s.getCharacteristic(C);
 ok=true; alert("Connected");
}

function send(t){
 if(ok) c.writeValue(new TextEncoder().encode(t+"\n"));
}

function jog(v){
 document.getElementById("v").innerText=v;
 send("JOGSLIDER:"+axis.value+":"+v);
}

function stop(){ jog(0); }
</script>

</body>
</html>
